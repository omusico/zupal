package game.synerg{	import flash.display.MovieClip;	import flash.events.Event;	import flash.ui.Mouse;	import flash.events.MouseEvent;	import Synerg;	import game.*;	import game.synerg.tiles.*;	import game.synerg.terrain.*;	import game.synerg.beings.*;	import game.synerg.Map;	public class Terrain extends MovieClip {		private var _map:Map;		public function Terrain() {			set_map(Synerg.terrain_map);			place_grass();			//place_forest();			place_cows();			place_cowboys();			//place_walls();		}		/* ********************* MAP ***************** */		/* deprecated I think */		public function get_map():Map {			return _map;		}		public function set_map(m: Map):void {			_map=m;		}		/* ******************** PLACEMENT ************** */		public function place_walls() {			var wall_layer:MovieClip = (MovieClip) (getChildByName("walls"));			var wall;			for (var w:uint = 5; w <= 16; ++w) {				wall=new Wall_vert(4,w);				wall.place();				wall_layer.addChild(wall);				wall=new Wall_vert(16,w);				wall.place();				wall_layer.addChild(wall);				wall=new Wall_horiz(w,16);				wall.place();				wall_layer.addChild(wall);			}		}		function place_cows() {			var cow_count=rand(COW_START_NUMBER,COW_START_NUMBER_RANGE);			var being_layer:MovieClip = (MovieClip) (getChildByName("beings"));			for (var num_cows = 0; num_cows < cow_count; ++num_cows) {				var cow:Cow_tile = new Cow_tile();				cow.random_position(num_cows * 5);				cow.place();				being_layer.addChild(cow);			}		}		function place_cowboys() {			var cow_count=rand(COWBOY_START_NUMBER,COWBOY_START_NUMBER_RANGE);			var being_layer:MovieClip = (MovieClip) (getChildByName("beings"));			for (var num_cows = 0; num_cows < cow_count; ++num_cows) {				var c:Cowboy = new Cowboy();					c.random_position(num_cows * 5);				c.place();				being_layer.addChild(c);			}		}		private function rand(base: int, range: int, chaos: int = 1):int {			for (var iter:int = 0; iter < chaos; ++iter) {				base+=Math.random()*range;				base-=Math.random()*range;			}			return Math.max(1, base);		}		function place_grass() {			var stub_grass = new Grass_tile(Point_ij.point(0, 0));			var extent_i = (int) (Synerg.BOARD_SIZE / stub_grass.piece_width());			var extent_j = (int) (Synerg.BOARD_SIZE / stub_grass.piece_height());			var terrain_layer:MovieClip = (MovieClip) (getChildByName("terrain"));			for (var ik = 0; ik < extent_i; ++ik) {				for (var jk = 0; jk < extent_j; ++jk) {					var grass = new Grass_tile(Point_ij.point(ik * stub_grass.piece_width(), jk * stub_grass.piece_height()));					terrain_layer.addChild(grass);				}			}		}		function place_forest() {			var fc = FOREST_START_NUMBER +(( Math.random() * FOREST_START_NUMBER_RANGE) - (Math.random() * FOREST_START_NUMBER_RANGE));			trace("Terrain() placing " + fc + " forests");			var terrain_layer:MovieClip = (MovieClip) (getChildByName("forest"));			for (var num_forests = 0; num_forests < fc; ++num_forests) {				var forest:Forest_tile = new Forest_tile();				forest.random_position(num_forests * 5);				forest.place();				terrain_layer.addChild(forest);			}		}		private static var FOREST_START_NUMBER:int=2;		private static var FOREST_START_NUMBER_RANGE:int=0;		private static var COW_START_NUMBER:int=2;		private static var COW_START_NUMBER_RANGE:int=5;		private static var COWBOY_START_NUMBER:int=2;		private static var COWBOY_START_NUMBER_RANGE:int=0;	}}